@model IEnumerable<DishesDTO>  

@{
    ViewData["Title"] = "Главная";
}

<section id="banner">
	<div class="content">
		<header>
			<h1>
				Прованские<br />
				Травы
			</h1>
			<p>Готовим лучшее с заботой</p>
		</header>
		<p>Откройте для себя превосходный кейтеринг на нашем сайте — идеальное решение для любых мероприятий! Мы предлагаем изысканные блюда из свежих ингредиентов, от элегантных закусок до роскошных десертов, с доставкой прямо к вам. 
			Наша команда профессиональных поваров обеспечивает высокий стандарт качества, разнообразие меню и гибкие цены, чтобы ваше событие прошло незабываемо. Закажите кейтеринг онлайн уже сегодня и сосредоточьтесь на празднике, а не на кухне!</p>
		<ul class="actions">
			<li><a href="#" class="button big">Узнать больше</a></li>
		</ul>
	</div>
	<span class="image object">
		<img src="img/Home_first.jpg" alt="" />
	</span>

</section>

<!-- Section -->
<section>
	<header class="major">
		<h2>Почему именно мы?</h2>
	</header>
	<div class="features">
		<article>
			<span class="icon fa-gem"></span>
			<div class="content">
				<h3>Мы очень ценим вас:</h3>
				<p>Для нас каждый клиент — VIP-гость: мы слушаем пожелания, предлагаем персонализированные решения и стремимся превзойти ожидания.</p>
			</div>
		</article>
		<article>
			<span class="icon solid fa-paper-plane"></span>
			<div class="content">
				<h3>С нами легко связаться:</h3>
				<p>Поддержка по телефону, email или чату гарантирует, что вы всегда получите помощь без лишних хлопот.</p>
			</div>
		</article>
		<article>
			<span class="icon solid fa-rocket"></span>
			<div class="content">
				<h3>Мы очень быстрые:</h3>
				<p>Оформите заказ в пару кликов, и наша команда приготовит и доставит блюда максимально оперативно, чтобы ваше мероприятие стартовало без задержек.</p>
			</div>
		</article>
		<article>
			<span class="icon solid fa-signal"></span>
			<div class="content">
				<h3>Мы всегда работаем над улучшением качества: </h3>
				<p>Непрерывное совершенствование рецептов, обучение персонала и отзывы клиентов помогают нам предлагать только лучшее с каждым новым заказом.</p>
			</div>
		</article>
	</div>

</section>

@if (Model != null && Model.Any())
{
<header class="major">
    <h2>Рекомендуемые блюда</h2>
</header>


@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">
        @TempData["ErrorMessage"]
    </div>
}

<section class="category-section">
    <div class="dishes-grid">
        @foreach (var d in Model.OrderBy(d => d.Name)) 
        {
            <div class="dish-card">
                <a asp-area="" asp-controller="Dishes" asp-action="Show" asp-route-id="@d.id" class="image fit">
                    @if (!string.IsNullOrEmpty(d.Photo))
                    {
                        <img src="~/img/@d.Photo" alt="@d.Name" />
                    }
                    else
                    {
                        <div style="width: 100%; height: 150px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #999;">
                            <span>Нет фото</span>
                        </div>
                    }
                </a>
                <div class="CardBody">
                    <h3>
                        <a asp-area="" asp-controller="Dishes" asp-action="Show" asp-route-id="@d.id">
                            @d.Name
                        </a>
                    </h3>
                    @if (d.Price.HasValue)
                    {
                        <p><strong>Цена:</strong> @d.Price руб.</p>
                    }
                    @if (d.Weight.HasValue )
                    {
                        <p><strong>Вес:</strong> @d.Weight </p>
                    }

                    <div class="add-to-cart-section">
                            <form asp-controller="Cart" asp-action="Add" method="post" class="mt-4">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="dishId" value="@d.id" />
                                <div class="input-group" style="max-width: 200px;">
                                    <input type="number"
                                           name="quantity"
                                           value="1"
                                           min="1"
                                           max="99"
                                           class="form-control" />
                                    <button type="submit">
                                        В корзину
                                    </button>
                                </div>
                            </form>
                    </div>
                </div>
            </div>
        }
    </div>
</section>
}
else
{
<header class="major">
    <h2>Рекомендуемые блюда</h2>
</header>
<p>Рекомендуемые блюда пока не добавлены. </p>
}

<style>
     .dish-card {
         display: flex;
         flex-direction: column;
         height: 100%;
     }

        

     .CardBody {
         display: flex;
         flex-direction: column;
         flex: 1;
         padding: 8px;
         gap: 6px;
     }

         .CardBody h3,
         .CardBody p {
             margin: 0;
             line-height: 1.3;
         }

     .add-to-cart-section {
         margin-top: auto;
         padding-top: 12px;
         border-top: 1px solid #eee;
     }
</style>
